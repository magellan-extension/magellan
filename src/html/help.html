<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Help & Features - Magellan</title>
    <style>
      :root {
        /* Core colors - darker theme */
        --primary: #8b8bff;
        --primary-dark: #6b6bff;
        --error: #ff6b6b;
        --error-bg: rgba(255, 107, 107, 0.1);
        --success: #51cf66;
        --success-bg: rgba(81, 207, 102, 0.1);
        --warning: #ffd43b;
        --warning-bg: rgba(255, 212, 59, 0.1);
        --border-radius: 8px;
        --transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
          box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
          opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);

        /* Theme-specific variables - darker */
        --bg-primary: #0f0f13;
        --bg-secondary: #1a1a24;
        --text-primary: #e8e8f0;
        --text-secondary: #8b8b9e;
        --border-color: rgba(255, 255, 255, 0.08);
        --highlight-bg: rgba(139, 139, 255, 0.15);
        --scrollbar-track: var(--bg-primary);
        --scrollbar-thumb: #2a2a3a;
        --scrollbar-thumb-hover: #3a3a4a;
        --input-bg: var(--bg-secondary);
        --input-border: var(--border-color);
        --dropdown-bg: #1f1f2e;
        --dropdown-hover: rgba(255, 255, 255, 0.06);
        --dropdown-divider: var(--border-color);
      }

      /* Light theme */
      [data-theme="light"] {
        --bg-primary: #fafafa;
        --bg-secondary: #f0f0f5;
        --text-primary: #1a1a24;
        --text-secondary: #6b6b7a;
        --border-color: rgba(0, 0, 0, 0.08);
        --highlight-bg: rgba(139, 139, 255, 0.15);
        --scrollbar-track: var(--bg-primary);
        --scrollbar-thumb: #d0d0da;
        --scrollbar-thumb-hover: #b0b0ba;
        --input-bg: var(--bg-secondary);
        --input-border: var(--border-color);
        --dropdown-bg: var(--bg-secondary);
        --dropdown-hover: #e8e8f0;
        --dropdown-divider: var(--border-color);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        min-width: 320px;
        padding: 0;
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Inter", "SF Pro Text",
          "Helvetica Neue", Arial, sans-serif;
        color: var(--text-primary);
        background-color: var(--bg-primary);
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow-x: hidden;
        box-sizing: border-box;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--scrollbar-track);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--scrollbar-thumb-hover);
      }

      .container {
        display: flex;
        flex-direction: column;
        flex: 1;
        min-height: 0;
        height: 100%;
        padding: 0;
        max-width: 100%;
        box-sizing: border-box;
        overflow-y: auto;
        overflow-x: hidden;
      }

      .header-section {
        padding: 20px 16px;
        border-bottom: 1px solid var(--border-color);
        flex-shrink: 0;
        background-color: var(--bg-primary);
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .back-button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background-color: transparent;
        color: var(--text-secondary);
        border: none;
        border-radius: var(--border-radius);
        text-decoration: none;
        font-size: 13px;
        font-weight: 500;
        transition: var(--transition);
        margin-bottom: 16px;
        cursor: pointer;
      }

      .back-button:hover {
        background-color: var(--dropdown-hover);
        color: var(--text-primary);
      }

      .back-button svg {
        width: 16px;
        height: 16px;
      }

      .header {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo {
        width: 40px;
        height: 40px;
        border-radius: var(--border-radius);
        object-fit: cover;
      }

      .title {
        font-size: 20px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .content {
        padding: 24px 16px;
        max-width: 800px;
        margin: 0 auto;
        width: 100%;
      }

      .section {
        margin-bottom: 40px;
      }

      .section-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 16px;
      }

      .features-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .feature-card {
        padding: 16px;
        background-color: var(--bg-secondary);
        border-radius: var(--border-radius);
        border: 1px solid var(--border-color);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
          box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: default;
      }

      .feature-card:hover {
        background-color: rgba(139, 139, 255, 0.05);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
          box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
          background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .feature-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 8px;
      }

      .feature-icon {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        color: var(--primary);
      }

      .feature-name-row {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .feature-name {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .badge {
        display: inline-flex;
        align-items: center;
        padding: 2px 6px;
        background-color: rgba(139, 139, 255, 0.15);
        color: var(--primary);
        border-radius: 4px;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.3px;
      }

      .feature-description {
        font-size: 13px;
        line-height: 1.6;
        color: var(--text-secondary);
        margin-top: 8px;
        padding-left: 32px;
      }

      .feature-description strong {
        color: var(--text-primary);
        font-weight: 600;
      }

      .tips-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .tips-list li {
        padding: 12px 16px;
        margin-bottom: 8px;
        background-color: var(--bg-secondary);
        border-radius: var(--border-radius);
        border: 1px solid var(--border-color);
        font-size: 13px;
        line-height: 1.6;
        color: var(--text-secondary);
      }

      .tips-list li strong {
        color: var(--text-primary);
        font-weight: 600;
        display: block;
        margin-bottom: 4px;
      }

      @media (min-width: 600px) {
        .features-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      .footer {
        margin-top: 24px;
        padding-top: 16px;
        border-top: 1px solid var(--border-color);
        flex-shrink: 0;
        padding: 16px 20px;
      }

      .continue-button {
        width: 100%;
        padding: 12px 16px;
        background-color: var(--primary);
        color: white;
        border: none;
        border-radius: var(--border-radius);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .continue-button:hover {
        background-color: #7a7aff;
        transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .continue-button svg {
        width: 16px;
        height: 16px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header-section">
        <div class="header">
          <img src="../../public/logo.png" alt="Magellan Logo" class="logo" />
          <h1 class="title">Help & Features</h1>
        </div>
      </div>

      <div class="content">
        <div class="section">
          <h2 class="section-title">Input Controls</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Attach Document</span>
                </div>
              </div>
              <div class="feature-description">
                Upload PDF, TXT, DOC, DOCX, MD, or RTF files to include them in
                your conversation. The AI can read and answer questions about
                the document content. The button shows a purple highlight when a
                document is attached.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <circle
                    cx="11"
                    cy="11"
                    r="8"
                    stroke="currentColor"
                    stroke-width="2"
                  />
                  <path
                    d="m21 21-4.35-4.35"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Search Mode</span>
                </div>
              </div>
              <div class="feature-description">
                <strong>Blended:</strong> Searches the current page/document
                first, then falls back to general knowledge. This is the default
                mode.<br /><br />
                <strong>Page:</strong> Searches only within the current
                page/document for page-specific answers.<br /><br />
                <strong>General:</strong> Uses only general knowledge, ignoring
                the current page. Click the button to cycle through modes.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">AI Model Selection</span>
                </div>
              </div>
              <div class="feature-description">
                Choose from hundreds of AI models. Different models have
                different strengths - some are faster, some are more accurate,
                and some support real-time web search. Click to browse and
                select your preferred model.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <circle
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="2"
                  />
                  <path
                    d="M12 6v6l4 2"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Real-time Search</span>
                  <span class="badge">Optional</span>
                </div>
              </div>
              <div class="feature-description">
                When enabled, the AI can search the web in real-time for the
                latest information. Useful for current events, recent news, or
                up-to-date data. The button shows a purple highlight when
                active. Note: This may incur additional costs.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9 18l6-6-6-6"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Send Message</span>
                </div>
              </div>
              <div class="feature-description">
                Send your question to the AI. Press Enter to send (Shift+Enter
                for a new line). The button shows a loading spinner while
                processing your request.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6 9L12 15L18 9"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Collapse/Expand</span>
                </div>
              </div>
              <div class="feature-description">
                Click the caret button in the top-right to collapse all buttons
                and show only the input field. Click again to expand. Your
                preference is saved automatically.
              </div>
            </div>
          </div>
        </div>

        <div class="section">
          <h2 class="section-title">Chat Features</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Chat History</span>
                </div>
              </div>
              <div class="feature-description">
                Your conversation history is automatically saved per tab. Each
                tab maintains its own separate chat history, so you can have
                different conversations on different pages. History persists
                even after closing and reopening the extension.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle
                    cx="12"
                    cy="12"
                    r="3"
                    stroke="currentColor"
                    stroke-width="2"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Citations</span>
                </div>
              </div>
              <div class="feature-description">
                When the AI references content from the page, it provides
                citations. Click the "Cited Sentences" tab to see all citations.
                Navigate through them using Previous/Next buttons, and the
                corresponding text on the page will be highlighted.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">General Knowledge Prompt</span>
                </div>
              </div>
              <div class="feature-description">
                For any assistant message, click "Prompt with general knowledge"
                to get an answer using only general knowledge, ignoring the page
                content. Useful when you want a broader perspective or the page
                content isn't relevant.
              </div>
            </div>
          </div>
        </div>

        <div class="section">
          <h2 class="section-title">Settings</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Show Highlights</span>
                </div>
              </div>
              <div class="feature-description">
                Toggle to show or hide highlighted citations on the page. When
                enabled, cited text is highlighted with a purple background, and
                the currently active citation has a purple outline.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Theme</span>
                </div>
              </div>
              <div class="feature-description">
                Choose between Dark, Light, or System theme. System theme
                follows your operating system's appearance settings.
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-header">
                <svg
                  class="feature-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div class="feature-name-row">
                  <span class="feature-name">Clear Chat</span>
                </div>
              </div>
              <div class="feature-description">
                Clear the current tab's chat history. This action cannot be
                undone. All messages and citations will be removed.
              </div>
            </div>
          </div>
        </div>

        <div class="section">
          <h2 class="section-title">Tips & Best Practices</h2>
          <ul class="tips-list">
            <li>
              <strong>Be specific</strong>
              The more specific your question, the better the answer. Include
              context about what you're looking for.
            </li>
            <li>
              <strong>Use the right mode</strong>
              Choose Page mode for page-specific questions, General for broad
              questions, and Blended for a mix of both.
            </li>
            <li>
              <strong>Attach documents</strong>
              For long documents or PDFs, attach them to get better
              context-aware answers.
            </li>
            <li>
              <strong>Check citations</strong>
              Always review citations to verify the AI's sources and understand
              where information came from.
            </li>
            <li>
              <strong>Real-time search</strong>
              Enable real-time search for current events, but be aware it may
              increase costs.
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="footer">
      <button id="continueButton" class="button continue-button">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M5 12H19M19 12L12 5M19 12L12 19"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        Continue
      </button>
    </div>

    <script type="module" src="../js/ui/theme.js"></script>
    <script type="module" src="../js/ui/help.js"></script>
  </body>
</html>
